{% extends 'base.html' %}
{% block title %}Sales system{% endblock %}
{% block content %}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<style>
  /* body {
    background: url('/static/pic4.jpeg.jpg') no-repeat center center fixed;
    background-size: cover;
    color: azure;
  } */
</style>
<div class="flash-messages">
  {% for category, message in messages %}
  <div class="alert alert-{{ category }}">
    {{ message }}
  </div>
  {% endfor %}
</div>
{% endif %}
{% endwith %}
<h1>Welcome to Dashboard page</h1>
<div class="container">
  <div class="row">
    <div class="col-md-4">
      <div class="card">
        <div class="card-body" style="background-color: black;">
          <h5 class="card-title" style="color: white;">Total Sales</h5>
          <p class="card-text" style="color: white;">{{ts}}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-body" style="background-color: black;">
          <h5 class="card-title" style="color: white;">Total Products</h5>
          <p class="card-text" style="color: white;">{{tp}}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-body" style="background-color: black;">
          <h5 class="card-title" style="color: white;">Total Profits</h5>
          <p class="card-text" style="color: white;">{{tf}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-md-4">
      <div class="card">
        <div class="card-body" style="background-color: black;">
          <h5 class="card-title" style="color: white;">Top selling Product</h5>
          <p class="card-text" style="color: white;">{{tsp}}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-body" style="background-color: black;">
          <h5 class="card-title" style="color: white;">Profits Today</h5>
          <p class="card-text" style="color: white;">{{pd}}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-body" style="background-color: black;">
          <h5 class="card-title" style="color: white;">Sales Today</h5>
          <p class="card-text" style="color: white;">{{sd}}</p>
        </div>
      </div>
    </div>
  </div>
</div>
<br><br>
<canvas id="bar-chart1" width="1500" height="750"></canvas>
<canvas id="bar-chart2" width="1500" height="750"></canvas>
<canvas id="line-chart1" width="1500" height="750"></canvas>
<canvas id="line-chart2" width="1500" height="750"></canvas>
<!-- Include Chart.js library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

<!-- Bootstrap bundle (optional, if not already included in your base template) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<script>
  // First bar chart
  new Chart(document.getElementById("bar-chart1"), {
    type: 'bar',
    data: {
      labels: {{ p_name | safe }},

    datasets: [
    {
      label: "Population (millions)",
      backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
      data: {{ p_sales | safe }}
        }
  ]
    },
    options: {
    legend: { display: false },
    title: {
      display: true,
      text: 'Sales per product',

    }
  }
  });

  // Second bar chart
  new Chart(document.getElementById("bar-chart2"), {
    type: 'bar',
    data: {
      labels: {{ p_n | safe }},
    datasets: [
    {
      label: "Population (millions)",
      backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850,#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
      data: {{ p_s | safe }}
        }
  ]
    },
    options: {
    legend: { display: false },
    title: {
      display: true,
      text: 'Profit per product'
    }
  }
  });

  // Line chart 1(sample data)
  // line chart
  new Chart(document.getElementById("line-chart1"), {
    type: 'line',
    data: {
      labels: {{ day | safe}},
    datasets: [{
      data: {{ sl | safe}},
    label: "Sales",
    borderColor: "#3e95cd",
    fill: false
      }, {

    }, {
      data: [],
      label: " ",
      borderColor: "#c45850",
      fill: false
    }
  ]
  },
    options: {
    title: {
      display: true,
      text: 'Sales Per Day'
    }
  }
            });
  // line chart2
  new Chart(document.getElementById("line-chart2"), {
    type: 'line',
    data: {
      labels: {{ day | safe}},
    datasets: [{
      data: {{ profit | safe}},
    label: "Profits",
    borderColor: "#3e95cd",
    fill: false
        }
  ]
  },
    options: {
    title: {
      display: true,
      text: 'Profit Per Day'
    }
  }
            });

  // Function to hide flash messages after 3 seconds
  setTimeout(function () {
    var flashMessages = document.querySelector('.flash-messages');
    if (flashMessages) {
      flashMessages.style.display = 'none';
    }
  }, 3000); // 3000 milliseconds = 3 seconds
</script>

{% endblock %}